---
import Layout from '../../layouts/Layout.astro';

export async function getStaticPaths() {
  const response = await fetch("https://sfkiytfrnmwhihljfcxl.supabase.co/rest/v1/cases",{
    method:"GET",
    headers: {
        apikey:"eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNma2l5dGZybm13aGlobGpmY3hsIiwicm9sZSI6ImFub24iLCJpYXQiOjE3NjMwMjgwMDEsImV4cCI6MjA3ODYwNDAwMX0.A_ptC_G7EWu7ekTDk_NTYkXcqNyuLuiCnONiGLONjUw"
    }
});
const data = await response.json();

return data.map((post) => {
    return {
      params: { id: post.id },
      props: { post },
    };
  });
}

const { id } = Astro.params;
const { post } = Astro.props;
---

<Layout>
    <main>
        <div class="crumbs">
        <a href="/">HOME</a>
        <span>></span>
        <a href="/cases">CASES</a>
        <span>></span>
        <span>{post.brand_name}</span>
        </div>
        <div class="grid">
        <div>
            <img src=`https://sfkiytfrnmwhihljfcxl.supabase.co/storage/v1/object/public/Toki/${post.image}` alt="case image"/>
        </div>
        <div>
            <h1>{post.brand_name}</h1>
            <h2>{post.product_name}</h2>
            <h3>Case details</h3>
            <p>{post.description}</p>
        </div>
        </div>
    </main> 
</Layout>

<style>
    main {
        margin: 6rem;
    }
    @media (min-width: 980px){
        .grid {
        display: grid;
        grid-template-columns: 1fr 1fr;
        justify-items: right;
        gap: 2rem;
        }
        p {
        padding-right: 10rem;
        display: block;
        }
        .crumbs {
            padding-left: 12rem;
        }
    }
    p {
        line-height: 150%;
    }
    .crumbs {
        color: grey;
        font-size: 0.8rem;
    }
    .crumbs a {
        text-decoration: none;
        color: grey;
    }
    .crumbs a:hover {
        text-decoration: underline;
    }
    h1 {
        font-weight: lighter;
        margin: 0;
    }
    h2 {
        font-family: Georgia, 'Times New Roman', Times, serif;
        font-size: xx-large;
        font-weight: lighter;
        margin: 0;
        padding-top: 0.5rem;
        padding-bottom: 0.5rem;
    }
    h3 {
        color: #D8A8a0;
        font-weight: 300;
        display: block;
        border-bottom: 0.5px solid rgb(0, 0, 0);
        padding-bottom: 0.5rem;
        width: 50%;
        margin: 0;
    }
</style>